type Phrase {
  id: ID!
  german: String!
  spanish: String!
  words: [String!]
  tags: [String!]!
  createdAt: String!
}

input PhraseFilter {
  tags: [String!]
  search: String
}

type TranslationResult {
  text: String!
  detectedSourceLanguage: String
}

type PerWordExplanation {
  missing: String
  misplaced: String
  misspelled: String
}

type PerWordExplanationEntry {
  key: String!
  value: PerWordExplanation!
}

type NewPhrase {
  id: ID!
  phrase: String!
  synonyms: [String!]
  words: [Word!]!
  perWordExplanation: [PerWordExplanationEntry!]
  level: String
  context: String
  createdAt: String!
}

type PhraseRelation {
  id: ID!
  main: NewPhrase!
  translated: NewPhrase!
  createdAt: String!
}

extend type Query {
  phrases(filter: PhraseFilter, limit: Int, offset: Int): [Phrase!]!
  phrase(id: ID!): Phrase
  phrasesCount(filter: PhraseFilter): Int!

  newPhrases(lang: String!, limit: Int, offset: Int): [NewPhrase!]!
  newPhrase(lang: String!, id: ID!): NewPhrase
  phraseRelations(limit: Int, offset: Int): [PhraseRelation!]!
}

extend type Mutation {
  addPhrase(german: String!, spanish: String!, tags: [String!]): Phrase!
  addBulkPhrases(rawText: String!): [Phrase!]!
  translate(text: String!, targetLang: String): TranslationResult!
}
